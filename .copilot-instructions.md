# QuillMark Copilot Instructions

## Architecture
QuillMark is a pluggable markdown rendering library with trait-based backends:
- `quillmark-core`: Core traits and types  
- `quillmark-typst`: Typst backend for PDF/SVG generation
- Backends implement `Backend` trait with `id()`, `supported_formats()`, and `render()` methods
- Do not lose the error chain when wrapping errors. Propagate the original error as the source.

## Key Patterns

**Backend Usage:**
```rust
use quillmark_core::{Backend, Options, OutputFormat};
let options = Options { 
    backend: Some("typst".to_string()), 
    format: Some(OutputFormat::Pdf) 
};
let artifacts = backend.render(markdown, &options)?;
```

**Quill Templates:**
Templates in `examples/` use `glue.typ` with `$content$` placeholder for rendered markdown.

**Test Context:**
Use `quillmark_core::test_context` helpers for examples:
- `test_context::examples_dir()` - Workspace examples directory
- `test_context::create_output_dir(name)` - Output directories
